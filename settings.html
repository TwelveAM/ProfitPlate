<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ProfitPlate – Settings</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta
      name="description"
      content="Settings for ProfitPlate – currency, behaviour and data options."
    />
    <link rel="stylesheet" href="assets/styles.css" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/favicon-plate-32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="64x64"
      href="assets/favicon-plate-64.png"
    />
  </head>
  <body>
    <div class="page">
      <!-- Header with nav -->
      <header class="header">
        <div class="logo-block">
          <div class="logo-plate">
            <span>PP</span>
          </div>
          <div class="brand-text">
            <div class="name">ProfitPlate</div>
            <div class="tagline">Know your profit per plate.</div>
          </div>
        </div>

        <nav class="nav">
          <a href="index.html" class="nav-link">Home</a>
          <a href="purchases.html" class="nav-link">Purchases</a>
          <a href="recipes.html" class="nav-link">Recipes</a>
          <a href="settings.html" class="nav-link nav-link-active">Settings</a>
        </nav>
      </header>

      <main>
        <!-- Hero -->
        <section class="hero">
          <h1 class="hero-title">Settings</h1>
          <p class="hero-subtitle">
            Adjust how ProfitPlate behaves in your kitchen – currency, display
            options and data controls. In the real app, these settings would be
            stored in your account.
          </p>
        </section>

        <!-- General -->
        <section class="form-card" style="margin-bottom: 24px;">
          <div class="form-title-row">
            <div class="form-title">General</div>
            <div class="form-hint">
              Basic preferences that apply to the whole app.
            </div>
          </div>

          <div class="form-row">
            <div class="form-field">
              <label class="form-label" for="setting-currency">Currency</label>
              <select
                id="setting-currency"
                class="form-select"
                name="currency"
              >
                <option value="EUR">€ – Euro</option>
                <option value="USD">$ – US Dollar</option>
                <option value="GBP">£ – British Pound</option>
                <option value="RON">lei – Romanian Leu</option>
                <option value="CHF">CHF – Swiss Franc</option>
              </select>
            </div>

            <div class="form-field">
              <label class="form-label" for="setting-locale">
                Number format
              </label>
              <select id="setting-locale" class="form-select" name="locale">
                <option value="eu">1.234,56 (EU style)</option>
                <option value="us">1,234.56 (US/UK style)</option>
              </select>
            </div>
          </div>
        </section>

        <!-- Behaviour -->
        <section class="form-card" style="margin-bottom: 24px;">
          <div class="form-title-row">
            <div class="form-title">Behaviour</div>
            <div class="form-hint">
              How ProfitPlate calculates and displays your costs.
            </div>
          </div>

          <div class="form-row">
            <div class="form-field" style="flex: 1;">
              <label class="form-label">Auto-recalculate recipes</label>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 8px 12px;
                  border-radius: 10px;
                  border: 1px solid #d3d7e0;
                  font-size: 13px;
                "
              >
                <span>
                  When an ingredient price changes in Purchases, update recipe
                  costs automatically.
                </span>
                <input
                  id="setting-auto-recalc"
                  type="checkbox"
                  checked
                  style="width: 18px; height: 18px;"
                />
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-field" style="flex: 1;">
              <label class="form-label">Show advanced details</label>
              <div
                style="
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 8px 12px;
                  border-radius: 10px;
                  border: 1px solid #d3d7e0;
                  font-size: 13px;
                "
              >
                <span>
                  Display margin %, batch cost and ingredient breakdown by
                  default. Turn off for a simpler view.
                </span>
                <input
                  id="setting-advanced"
                  type="checkbox"
                  checked
                  style="width: 18px; height: 18px;"
                />
              </div>
            </div>
          </div>
        </section>

        <!-- Data -->
        <section class="form-card">
          <div class="form-title-row">
            <div class="form-title">Data &amp; local storage</div>
            <div class="form-hint">
              ProfitPlate keeps everything in your browser for now. No server,
              no cloud – just your device.
            </div>
          </div>

          <p style="font-size: 13px; color: #555; margin-bottom: 12px;">
            In the real app, this section would let you export / import data,
            connect multiple devices and reset your account. For now you can
            clear the local demo data from this browser.
          </p>

          <button
            type="button"
            class="btn-secondary"
            onclick="resetDemoData()"
          >
            Clear local demo data
          </button>
        </section>
      </main>

      <div class="bottom-strip" style="margin-top: 22px;">
        Settings are a visual prototype for now. In a future version, they’ll be
        saved per-account and synced across your devices.
      </div>
    </div>

    <!-- Tiny brain for settings – uses localStorage but stays simple -->
    <script>
      const STORAGE_KEY = "profitplate-settings";

      function loadSettings() {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          if (!raw) return;
          const s = JSON.parse(raw);

          if (s.currency) {
            document.getElementById("setting-currency").value = s.currency;
          }
          if (s.locale) {
            document.getElementById("setting-locale").value = s.locale;
          }
          if (typeof s.autoRecalc === "boolean") {
            document.getElementById("setting-auto-recalc").checked =
              s.autoRecalc;
          }
          if (typeof s.showAdvanced === "boolean") {
            document.getElementById("setting-advanced").checked =
              s.showAdvanced;
          }
        } catch (e) {
          console.warn("Could not load settings", e);
        }
      }

      function saveSettings() {
        const s = {
          currency: document.getElementById("setting-currency").value,
          locale: document.getElementById("setting-locale").value,
          autoRecalc: document.getElementById("setting-auto-recalc").checked,
          showAdvanced: document.getElementById("setting-advanced").checked
        };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
      }

      function resetDemoData() {
        if (!confirm("Clear local ProfitPlate data in this browser?")) return;
        try {
          // Settings themselves
          localStorage.removeItem(STORAGE_KEY);
          // Future: purchases/recipes data key (we'll hook to real key later)
          // localStorage.removeItem("profitplate-data");
          alert("Local demo settings cleared. Reload the page to see defaults.");
        } catch (e) {
          alert("Could not clear data: " + e.message);
        }
      }

      // Wire change handlers
      document
        .getElementById("setting-currency")
        .addEventListener("change", saveSettings);
      document
        .getElementById("setting-locale")
        .addEventListener("change", saveSettings);
      document
        .getElementById("setting-auto-recalc")
        .addEventListener("change", saveSettings);
      document
        .getElementById("setting-advanced")
        .addEventListener("change", saveSettings);

      // Init
      loadSettings();
    </script>
  </body>
</html>
