<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ProfitPlate – Settings</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta
      name="description"
      content="Adjust how ProfitPlate behaves in your kitchen – currency, display options and data controls."
    />
    <link rel="stylesheet" href="assets/styles.css" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/favicon-plate-32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="64x64"
      href="assets/favicon-plate-64.png"
    />
  </head>
  <body>
    <div class="page">
      <!-- Header with nav -->
      <header class="header">
        <div class="logo-block">
          <div class="logo-plate">
            <span>PP</span>
          </div>
          <div class="brand-text">
            <div class="name">ProfitPlate</div>
            <div class="tagline">Know your profit per plate.</div>
          </div>
        </div>

        <nav class="nav">
          <a href="index.html" class="nav-link">Home</a>
          <a href="purchases.html" class="nav-link">Purchases</a>
          <a href="recipes.html" class="nav-link">Recipes</a>
          <a href="settings.html" class="nav-link nav-link-active"
            >Settings</a
          >
        </nav>
      </header>

      <main>
        <!-- Intro -->
        <section class="hero">
          <h1 class="hero-title">Settings</h1>
          <p class="hero-subtitle">
            Adjust how ProfitPlate behaves in your kitchen – currency, display
            options and data controls. In the real app, these would be stored in
            your account and synced across devices.
          </p>
        </section>

        <!-- Settings card -->
        <section class="form-card" style="margin-bottom: 24px;">
          <!-- General -->
          <div class="form-title-row">
            <div class="form-title">General</div>
            <div class="form-hint">
              Basic preferences that apply to the whole app.
            </div>
          </div>

          <div class="form-row">
            <div class="form-field" style="flex: 1;">
              <label class="form-label" for="settings-language">
                Language
              </label>
              <select
                class="form-select"
                id="settings-language"
                name="language"
              >
                <option value="en">English</option>
                <option value="ro">Română</option>
                <option value="fr">Français</option>
                <option value="it">Italiano</option>
              </select>
            </div>

            <div class="form-field" style="flex: 1;">
              <label class="form-label" for="settings-currency">
                Currency
              </label>
              <select
                class="form-select"
                id="settings-currency"
                name="currency"
              >
                <option value="EUR">€ – Euro</option>
                <option value="RON">lei – Romanian leu</option>
                <option value="USD">$ – US dollar</option>
                <option value="GBP">£ – British pound</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-field" style="flex: 1;">
              <label class="form-label" for="settings-number-format">
                Number format
              </label>
              <select
                class="form-select"
                id="settings-number-format"
                name="numberFormat"
              >
                <option value="eu">1.234,56 (EU style)</option>
                <option value="us">1,234.56 (US/UK style)</option>
              </select>
            </div>
          </div>

          <!-- Behaviour -->
          <div
            class="form-title-row"
            style="margin-top: 24px; border-top: 1px solid #e0e3ea; padding-top: 16px;"
          >
            <div class="form-title">Behaviour</div>
            <div class="form-hint">
              How ProfitPlate calculates and displays your costs.
            </div>
          </div>

          <div class="form-row">
            <div class="form-field" style="flex: 1;">
              <label class="form-label" for="settings-auto-recalc">
                Auto-recalculate recipes
              </label>
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  font-size: 13px;
                  color: #444;
                "
              >
                <input
                  id="settings-auto-recalc"
                  type="checkbox"
                  style="width: 16px; height: 16px;"
                />
                <span>
                  When an ingredient price changes in Purchases, update recipe
                  costs automatically.
                </span>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-field" style="flex: 1;">
              <label class="form-label" for="settings-show-advanced">
                Show advanced details
              </label>
              <div
                style="
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  font-size: 13px;
                  color: #444;
                "
              >
                <input
                  id="settings-show-advanced"
                  type="checkbox"
                  style="width: 16px; height: 16px;"
                />
                <span>
                  Display margin %, batch cost and ingredient breakdown by
                  default. Turn off for a simpler view.
                </span>
              </div>
            </div>
          </div>

          <!-- Data & local storage -->
          <div
            class="form-title-row"
            style="margin-top: 24px; border-top: 1px solid #e0e3ea; padding-top: 16px;"
          >
            <div class="form-title">Data &amp; local storage</div>
            <div class="form-hint">
              ProfitPlate keeps everything in your browser for now. No server,
              no cloud – just your device.
            </div>
          </div>

          <div class="form-row">
            <div class="form-field" style="flex: 1;">
              <button
                type="button"
                class="btn-secondary"
                id="settings-clear-data"
              >
                Clear local demo data
              </button>
              <p
                style="
                  margin-top: 6px;
                  font-size: 12px;
                  color: #666;
                  max-width: 520px;
                "
              >
                This will wipe the example Purchases, Recipes and Settings from
                this browser only. In a future version you’ll be able to import,
                export and sync data between devices.
              </p>
            </div>
          </div>
        </section>

        <section class="hero" style="margin-bottom: 20px;">
          <p style="font-size: 13px; color: #666;">
            Settings are a visual prototype for now. In a future version,
            they’ll be saved per account and synced across all your devices.
          </p>
        </section>
      </main>
    </div>

    <!-- Tiny local-settings helper so it feels alive -->
    <script>
      (function () {
        const STORAGE_KEY = "pp_settings_v1";

        function loadSettings() {
          try {
            const raw = localStorage.getItem(STORAGE_KEY);
            return raw ? JSON.parse(raw) : {};
          } catch (e) {
            return {};
          }
        }

        function saveSettings(values) {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(values));
        }

        const els = {
          language: document.getElementById("settings-language"),
          currency: document.getElementById("settings-currency"),
          numberFormat: document.getElementById("settings-number-format"),
          autoRecalc: document.getElementById("settings-auto-recalc"),
          showAdvanced: document.getElementById("settings-show-advanced"),
          clearData: document.getElementById("settings-clear-data"),
        };

        const current = loadSettings();

        if (current.language && els.language) {
          els.language.value = current.language;
        }
        if (current.currency && els.currency) {
          els.currency.value = current.currency;
        }
        if (current.numberFormat && els.numberFormat) {
          els.numberFormat.value = current.numberFormat;
        }
        if (typeof current.autoRecalc === "boolean" && els.autoRecalc) {
          els.autoRecalc.checked = current.autoRecalc;
        }
        if (typeof current.showAdvanced === "boolean" && els.showAdvanced) {
          els.showAdvanced.checked = current.showAdvanced;
        }

        function persist() {
          saveSettings({
            language: els.language.value,
            currency: els.currency.value,
            numberFormat: els.numberFormat.value,
            autoRecalc: els.autoRecalc.checked,
            showAdvanced: els.showAdvanced.checked,
          });
        }

        ["change", "input"].forEach((evt) => {
          els.language.addEventListener(evt, persist);
          els.currency.addEventListener(evt, persist);
          els.numberFormat.addEventListener(evt, persist);
          els.autoRecalc.addEventListener(evt, persist);
          els.showAdvanced.addEventListener(evt, persist);
        });

        if (els.clearData) {
          els.clearData.addEventListener("click", () => {
            if (
              confirm(
                "This will clear Purchases, Recipes and Settings saved in this browser.\n\nAre you sure?"
              )
            ) {
              localStorage.clear();
              location.reload();
            }
          });
        }
      })();
    </script>
  </body>
</html>
