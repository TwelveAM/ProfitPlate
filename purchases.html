<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Purchases – ProfitPlate</title>

    <link rel="stylesheet" href="assets/styles.css" />
  </head>

  <body>
    <div class="container">

      <!-- Navigation -->
      <nav class="nav">
        <a href="index.html" class="nav-link">Home</a>
        <a href="purchases.html" class="nav-link nav-link-active">Purchases</a>
        <a href="recipes.html" class="nav-link">Recipes</a>
        <a href="settings.html" class="nav-link">Settings</a>
      </nav>

      <h1>Purchases</h1>
      <p>
        This is your ingredient base. Add items you buy, organize them by
        category, and keep supplier prices up to date. Recipes will use everything
        you add here.
      </p>

      <!-- Add item button -->
      <button class="btn-primary" onclick="toggleAddForm()">Add item manually</button>

      <!-- Add purchase item form -->
      <div id="add-item-form" class="settings-box hidden" style="margin-top: 24px;">
        <h2 class="settings-title">Add a new purchase item</h2>

        <form id="purchase-form">
          <label>Name</label>
          <input id="item-name" placeholder="e.g. Butter 82% 1kg" />

          <div class="recipe-form-row">
            <div class="half">
              <label>Category</label>
              <select id="item-category">
                <option value="">Select...</option>
                <option value="Meat & Fish">Meat & Fish</option>
                <option value="Dairy & Eggs">Dairy & Eggs</option>
                <option value="Vegetables & Fruit">Vegetables & Fruit</option>
                <option value="Dry Goods">Dry Goods</option>
                <option value="Spices & Condiments">Spices & Condiments</option>
                <option value="Other">Other</option>
              </select>
            </div>

            <div class="half">
              <label>Sub-type</label>
              <select id="item-subtype">
                <option value="">Select...</option>
              </select>
            </div>
          </div>

          <label>Supplier</label>
          <input id="item-supplier" placeholder="e.g. Metro" />

          <div class="recipe-form-row">
            <div class="half">
              <label>Unit (for recipes)</label>
              <select id="item-unit">
                <option value="">Select...</option>
                <option value="kg">kg</option>
                <option value="g">gr</option>
                <option value="l">L</option>
                <option value="ml">ml</option>
                <option value="pcs">pcs</option>
                <option value="tray">tray</option>
                <option value="box">box</option>
              </select>
            </div>

            <div class="half">
              <label>Purchase price (per recipe unit)</label>
              <input id="item-price" placeholder="e.g. 6.40" />
            </div>
          </div>

          <!-- Pack helper -->
          <div class="settings-box" style="margin-top: 16px;">
            <h3 style="margin-bottom: 10px;">Or use pack helper</h3>

            <p style="margin-bottom: 10px; color:#555;">
              Example: 100 gr for 5 € → automatically calculates €/gr or €/kg based on selected recipe unit.
            </p>

            <div class="recipe-form-row">
              <input id="pack-qty" class="small-input" placeholder="e.g. 100" />
              <select id="pack-unit" style="width: 110px;">
                <option value="">unit</option>
                <option value="g">gr</option>
                <option value="kg">kg</option>
                <option value="ml">ml</option>
                <option value="l">L</option>
                <option value="pcs">pcs</option>
              </select>

              <input id="pack-price" class="small-input" placeholder="e.g. 5" />
              <button type="button" class="btn-secondary" onclick="fillPriceFromPack()">Use pack</button>
            </div>
          </div>

          <label>Notes (optional)</label>
          <input id="item-notes" placeholder="e.g. brand, fat %, packaging" />

          <div style="margin-top: 20px; display:flex; gap:14px;">
            <button class="btn-secondary" type="button" onclick="toggleAddForm()">Cancel</button>
            <button class="btn-primary" type="submit">Save item</button>
          </div>
        </form>
      </div>

      <hr />

      <!-- Recently updated -->
      <h2 style="margin-top: 30px;">Recently updated</h2>
      <div id="recent-list"></div>

      <hr />

      <input
        id="search-input"
        placeholder="Search by ingredient, supplier, or category..."
        style="margin-top: 20px;"
      />

      <!-- Main table -->
      <table style="margin-top: 18px;">
        <thead>
          <tr>
            <th>Ingredient</th>
            <th>Category</th>
            <th>Sub-type</th>
            <th>Unit</th>
            <th>Latest price</th>
            <th>Last updated</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody id="purchase-table"></tbody>
      </table>

    </div>

    <!-- Logic -->
    <script src="assets/app.js"></script>
  </body>
</html>
