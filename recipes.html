<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Recipes â€“ ProfitPlate</title>

    <link rel="stylesheet" href="assets/styles.css" />
  </head>

  <body>
    <div class="container">
      <!-- Navigation -->
      <nav class="nav">
        <a href="index.html" class="nav-link">Home</a>
        <a href="purchases.html" class="nav-link">Purchases</a>
        <a href="recipes.html" class="nav-link nav-link-active">Recipes</a>
        <a href="settings.html" class="nav-link">Settings</a>
      </nav>

      <h1>Recipes</h1>
      <p>
        See cost per portion and profit margin for each dish on your menu.
        Adjust selling price and keep an eye on how ingredient changes in
        Purchases affect your bottom line.
      </p>

      <!-- Top actions -->
      <div style="margin: 22px 0;">
        <button class="btn-primary" type="button" onclick="showRecipeForm()">
          Add recipe
        </button>
        <button class="btn-secondary" type="button">
          Export all to PDF (future)
        </button>
      </div>

      <!-- Add / Edit recipe form -->
      <div id="recipe-form-wrapper" class="settings-box hidden">
        <h2 class="settings-title" id="recipe-form-title">Add a new recipe</h2>
        <p class="settings-note">
          Give the recipe a name, set how many portions it makes, then add
          ingredients from your Purchases. ProfitPlate will calculate cost per
          portion automatically.
        </p>

        <form id="recipe-form">
          <label for="recipe-name">Recipe name</label>
          <input
            id="recipe-name"
            name="name"
            placeholder="e.g. Pasta Carbonara"
            required
          />

          <div class="recipe-form-row" style="margin-top: 12px;">
            <div class="half">
              <label for="recipe-portions">Portions per batch</label>
              <input
                id="recipe-portions"
                name="portions"
                placeholder="e.g. 10"
                required
              />
            </div>

            <div class="half">
              <label for="recipe-price">Selling price per portion (optional)</label>
              <input
                id="recipe-price"
                name="sellingPrice"
                placeholder="e.g. 12.50"
              />
            </div>
          </div>

          <hr />

          <h3 style="margin-bottom: 8px;">Ingredients</h3>
          <p class="settings-note">
            Choose items from your Purchases list, set the quantity and unit
            actually used in this recipe. ProfitPlate will use the latest
            purchase price to compute the cost.
          </p>

          <div id="ingredients-container" style="margin-top: 10px;"></div>

          <button
            type="button"
            class="btn-secondary"
            style="margin-top: 10px;"
            onclick="addIngredientRow()"
          >
            + Add ingredient
          </button>

          <div style="margin-top: 22px; display:flex; gap:14px;">
            <button
              type="button"
              class="btn-secondary"
              onclick="hideRecipeForm()"
            >
              Cancel
            </button>
            <button type="submit" class="btn-primary">
              Save recipe
            </button>
          </div>

          <!-- Hidden field to know if we edit an existing recipe -->
          <input type="hidden" id="recipe-id" />
        </form>
      </div>

      <hr />

      <!-- Menu overview -->
      <h2 style="margin-top: 24px;">Menu overview</h2>
      <p class="settings-note">
        Recipe data is stored locally in your browser using ProfitPlate's tiny
        brain. Changing ingredient prices in Purchases will change costs here
        the next time you open the page.
      </p>

      <div id="recipes-list" style="margin-top: 16px;"></div>
    </div>

    <!-- Data store + recipe logic -->
    <script src="assets/app.js"></script>
    <script src="assets/recipes.js"></script>
  </body>
</html>
